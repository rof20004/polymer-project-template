<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../bower_components/iron-icons/device-icons.html">
<link rel="import" href="../bower_components/iron-icons/editor-icons.html">
<link rel="import" href="../bower_components/iron-icons/hardware-icons.html">
<link rel="import" href="../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../bower_components/iron-icons/notification-icons.html">
<link rel="import" href="../bower_components/iron-icons/places-icons.html">
<link rel="import" href="../bower_components/iron-icons/social-icons.html">
<link rel="import" href="shared-styles.html">

<dom-module id="my-login">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

      .card {
        margin-top: 8%;
        margin-left: 32%;
        height: 50%;
        width: 35%;
      }

      .card h3 {
        padding-top: 20px;
        text-align: center;
      }

      .card paper-button {
        display:block;
        text-align: center;
        margin: 0 auto;
        margin-bottom: 20px;
        width: 70%;
      }

      .google {
        background: #66BB6A;
      }

      .facebook {
        background: #64b5f6;
      }
    </style>

    <firebase-auth
        id="auth"
        user="{{user}}"
        provider="{{provider}}"
        on-error="firebaseLoginError">
    </firebase-auth>

      <div class="card">
        <h3>Sistema Teste de Polymer</h3>
        <paper-button raised on-tap="firebaseLogin" data-args="google"   class="google"><iron-icon icon="social:person"></iron-icon>&nbsp;Entrar com Google</paper-button>
        <paper-button raised on-tap="firebaseLogin" data-args="facebook" class="facebook"><iron-icon icon="icons:thumbs-up-down"></iron-icon>&nbsp;Entrar com Facebook</paper-button>
      </div>

  </template>

  <script>
    Polymer({

      is: 'my-login',

      properties: {
        user: {
          type: Object,
          notify: true
        },
        provider: {
          type: String,
          notify: true
        }
      },

      firebaseLogin: function(e) {
        if (e.target.getAttribute('data-args') == null) {
          var main = document.querySelector('#main');
          main.$.toast.text = 'Login inv√°lido';
          main.$.toast.show();
          return;
        }
        this.provider = e.target.getAttribute('data-args');
        this.$.auth.signInWithRedirect();
      },

      firebaseLoginError: function(error) {
        var main = document.querySelector('#main');
        main.$.toast.text = error.detail.message;
        main.$.toast.show();
      }

    });
  </script>
</dom-module>
