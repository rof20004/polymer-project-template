<dom-module id="my-login">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

      paper-material {
        margin-top: 8%;
        margin-left: 32%;
        height: 50%;
        width: 35%;
      }

      paper-material h3 {
        padding-top: 20px;
        text-align: center;
      }

      paper-material paper-button {
        display:block;
        text-align: center;
        margin: 0 auto;
        margin-bottom: 20px;
        width: 70%;
      }

      .google {
        background: #66BB6A;
      }

      .facebook {
        background: #64b5f6;
      }
    </style>

    <firebase-auth
        id="auth"
        user="{{user}}"
        provider="{{provider}}"
        on-error="firebaseLoginError">
    </firebase-auth>

      <paper-material elevation="1">
        <h3>Sistema Teste de Polymer</h3>
        <paper-button raised on-tap="firebaseLogin" data-args="google"   class="google"><iron-icon icon="social:person"></iron-icon>&nbsp;Entrar com Google</paper-button>
        <paper-button raised on-tap="firebaseLogin" data-args="facebook" class="facebook"><iron-icon icon="icons:thumbs-up-down"></iron-icon>&nbsp;Entrar com Facebook</paper-button>
      </paper-material>

  </template>

  <script>
    Polymer({

      is: 'my-login',

      properties: {
        user: {
          type: Object,
          notify: true
        },
        provider: {
          type: String,
          notify: true
        }
      },

      firebaseLogin: function(e) {
        if (e.target.getAttribute('data-args') == null) {
          var app = document.querySelector('#app');
          app.$.toast.text = 'Login inv√°lido';
          app.$.toast.show();
          return;
        }
        this.provider = e.target.getAttribute('data-args');
        this.$.auth.signInWithPopup();
      },

      firebaseLoginError: function(error) {
        var app = document.querySelector('#app');
        app.$.toast.text = error.detail.message;
        app.$.toast.show();
      }

    });
  </script>
</dom-module>
